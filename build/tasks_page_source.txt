#The src/ directory
System-wide or uncategorized
	- [Refactoring] isLiteral - move to one place
	- [Refactoring] "use strict"
	- [Feature] new selector for event and role targets: NameAndLabel
		// affects ExpressionParser, view.Abstract, ViewManager
	- [Refactoring, Performance] inside sleep() of the views it's not needed to turn off the argument listeners, only arguments themselves.
	- [Performance,Q] turn off view bindings in sleep() (*)
	- [Feature,Q] hard_refresh event for views hierarchy
		// to force refresh of views, which are bound to plain JS objects (like Angular refresh cycle)
	- [Feature,Performance,Q] new kind of template includes - inlineInclude. Will be replaced in config, one time and forever.
	- [Refactoring] Widget and Refresher* must not access Firestorm.Element
	- [Refactoring] CONTROL_ATTRIBUTE_PREFIX and some other constants must be moved into Lava or schema
	- [Refactoring] remove "active modifiers" (see parsers, Argument and support)
	- [Feature] CSS compression, including class names
	- [Feature] Resource names compression
	- [Refactoring] search the framework code and find possibilities to rewrite for usage of:
		Firestorm.Array.exclude and Firestorm.Object.copy
		// Firestorm.Object.copy may be used in ClassManager in place of extend()
	- [Feature] config extenders should be turned into normal class, and created in Lava.init()
	- [Feature] {&gt;property: $path.to.include} - an include, which takes template from property.
	- [Feature, Performance] new kind of argument - StaticArgument for one-time calculations. Use it in static_eval
		// must not attach listeners
	- [Refactoring,Performance] Possible optimization: if Argument is equal to scope binding, than do not create an argument, get the binding.
		// search every place where Argument is used
	- [Feature,Performance] Segment option to evaluate it's property name only once and do not create listeners
		// in expression parser it will be curly braces instead of square: row{column.name}
	- [Refactoring] Move some exception texts into Lava.known_exceptions (like 'abstract function call')
	- [Feature,Q] add possibility to have several Lava versions on one page
	- [Refactoring] one DEBUG switch should be split into several.
		// like:
		// DEBUG_SCOPES - the scope processiong cycle,<br/>
		// DEBUG_FATAL - useful explanations before something will fail anyway (may be safely turned off in release),<br/>
		// DEBUG_DEV - wrong configuration by the programmer. <br/>
		// DEBUG_PARSERS - wrong templates <br/>
		// DEBUG_LISTENERS - listeners on destroyed objects
	- [Refactoring] some DEBUG checks should become permanent
	- [Refactoring] _cRawBlock.class_locator.name - rename to locator and change type to _cViewLocator.
		Same for _cWidgetConfig.class_locator.
	- [Fix] when parsing sugar inside x:define and x:widget: sugar config must be merged with parent,
		and class name of sugar must be taken from config.
	- [Refactoring] ScopeManager::scheduleScopeRefresh: do not return an object, use property of the Refreshable.
	- [Dev] recursive x:binding and x:assign protection.
		// Currently, you can create an assign of any property to itself
	- [Fix] fixes for old IE: check if get/set value on &lt;select&gt; elements works as expected. Write tests.
		// see <br/>
		// https://mootools.lighthouseapp.com/projects/2706/tickets/1116 <br/>
		// https://github.com/mootools/mootools-core/issues/2041 <br/>
		// and Source\Element\Element.js in MooTools
	- [Fix] fixes for old IE: check if event delegation for "change" event and others works in IE 8 and less.

Animation/
	- [Feature] pulsating and cyclic animations
		// most likely, there will be another independent class - AnimationSequence
	- [Feature,Q] animations should switch to transitions, if browser supports them
		// there must be a separate setting in the shema, USE_TRANSITIONS
Animation/BootstrapCollapse.class.js
	- [Feature] check for transitions support. If browser does not support transitions - apply end state immediately, without waiting.
Animation/Toggle.class.js
	- [Refactoring] must inherit from Emulated, + missing some important code
Data/
	- [Refactoring] make Guid field, and remove the check in record::get
		// guid is needed for MetaStorage
	- [Feature] schema switch to turn off validation
	- [Feature] an ability to unload records from modules to free memory.
	- [Feature] DateTime field. Will be serialized to integer, but internal value will be a Date object.
	- [Feature] Record and Collection fields should be exportable
	- [Feature] fields with calculated value and dependencies.
		// Something like this:
		// <pre>title: {
		//		get: function() { return this.get('first_name') + ' ' + ...}
		//		depends:['first_name', 'last_name']
		//	}</pre>
Data/Field/
	- [Performance] Integer and Id fields: invent some better check than regex
		// this._shared.valid_value_regex.test(value)
Data/ModuleAbstract.class.js
	- [Refactoring] destroy: Should the records be destroyed, and how? See comment inside destroy()
	- [Performance, Refactoring] record storage should be created from a function (now it's an object)
Firestorm/
	- [Feature] Element.fromHTML(html)
		// turn html into nodes, assert there is only one and return it
	- [Performance] use insertAdjacentHTML where possible (*)
	- [Performance] implement fast offset calculation algorithm (*)
	- [Performance] use native element's classList property in addClass(es), removeClass(es), hasClass
Parsers/
	- [Feature] x:classBinding directive - alternative form for x:class attribute
	- [Bug] {literal:}{:literal} switches produce a separate string.
		// When separate strings go in a row - this causes some parsing issues, when there is only one string expected.
		// Either unite sequential strings in a parser (preferable), or teach parsers.Common to compile such cases. <br/>
		// Workaround: do not allow any text before and after the literal switches (switch must immediately follow the tag/block start)
	- [Dev] make the text for exception "Text is not allowed in this context" inside asBlocks() more meaningful
		// text should depend on context
	- [Feature] x:controller control attribute - similar to x:widget
		// create an inline widget from element, with specified controller class. Also should work on sugar.
	- [Feature] allow to set default widget config in sugar options. Such config must be merged properly.
		// Reason: sometimes you will want to add options and other settings to sugar.
	- [Feature,Q] static_value directive should treat it's content as default value.
Parsers/Directives.js
	- [Refactoring] get rid of roles_storage to simplify logic
	- [Dev,Q] resources: need &lt;component path="..."&gt; tag inside &lt;resources&gt; to shorten paths
Parsers/TemplateParser.js
	- [Feature,Q] allow to set class for widget extenders
	- [Feature] implement removal of empty space from templates
	- [Feature,Q] &lt;x:region&gt; directive for includes: it will allow to cut off pieces of template depending on options
	- [Refactoring] remove unused lexer switch preserve_whitespace
	- [Fix,Dev] _parseStyleAttribute: currently will not parse style strings which contain strings with semicolon inside them as style value
		// do not use such styles, use classes!
Parsers/ExpressionParser.js
	- [Feature,Q] macros to shorten the ternary operator, for example: "{is_active -&gt; 'active'}"
	- [Feature, Performance] currently, each time any variable is referenced in argument's source code - it creates a new binding config.
		Parser must unite bindings to the same variable referenced multiple times.
	- [Feature, Performance] too many redundant variables in parse result. Remove flags, which value is false, remove empty arrays.
	- [Feature] static arguments must have their value in configs
	- [Refactoring] remove the dn() operator. It's existence is not possible with current architecture.
		Finish the up() operator, or remove it also.
System/App.class.js
	- [Feature] app.createModule(config) - create a module with given schema
System/Enumerable.class.js
	- [Feature] methods relocateIndex(old_index, new_index) and relocateValue(value, new_index)
		// is equivalent of removeAt, than insertAt for given value.
		// They will not fire item_removed/added events, only collection_changed and index_changed
	- [Feature,Q] method for batch processing of value listeners (example: turn them off)
System/Sugar.class.js
	- [Dev] always check that there are no redundant attributes on sugar tags
		// it's checked on root tag, but not on objects
	- [Feature] allow to set the default widget config in sugar. It will allow to create a sugar with default options.
	- [Refactoring,Q] control attributes of sugar should be handled in Sugar class
System/Template.class.js
	- [Performance,Q] render() function compilation.
		// Take into account that code may be compressed
	- [Feature] static IF/ELSEIF/ELSE construct.
		// will include parts of template by evaluating it's conditions once.
		// Faster than regular IF view, but does not react to changes.
System/ViewManager.class.js
	- [Performance,Q] speed up event dispatching and argument evaluation. Cache target and scope. <br/>
		+ Late evaluation for event arguments, as event does not always has valid targets.
View/Foreach.class.js
	- [Dev] "count" property must be read-only
	- [Performance,Feature,Q] allow to reuse templates in Foreach
		// template may contain parameterized includes - such templates cannot be reused
View/Container/
	- [Feature] add insertHTMLBefore() to all containers
	- [Feature] Emulated container: some "placement"s can have prependHTML and insertHTMLAfter
View/Container/Element.class.js
	- [Fix,Dev] if you render it's content and change any attribute before it's in DOM,
		than you will get wrong content in DOM. Make protection from such lifecycle.
		// make "is_rendered"/"waits_insertion" switch and throw an error, if setting a property while it's on
ClassManager.class.js
	- [Feature] Add ability to store arrays in Shared (it may be named differently, like "Prototype")
		Move default input roles from InputAbstract to prototype
	- [Feature,Q] Static members. Like Shared, but copied to prototype as-is. It's impossible to overwrite a Static member in inherited class.
	- [Feature,Q] Function inheritance: check if function calls it's parent. If not - do not create a parent in the prototype.
	- [Feature] mode, when classes are not exported. All classes exist only inside ClassManager, you can use .getConstructor() and .define()
	- [Feature,Q] conditional members. Member will be in class when condition is true.
		// sometimes you want to create a build with different features included. Also some classes have debug members.
	- [Feature] overrides: functions which does not need a parent
	- [Feature] "final" functions and members - must not be overridden. Example: HierarchyMember._onRefreshed
	- [Feature] abstract classes - classes with no constructor (instead there will be a function which throws an exception)
	- [Feature] abstract functions - must be overridden in inherited classes.
		// Class with an abstract function which is not overridden - is also abstract.
		// When overriding happens - the parent function is not created
	- [Feature,Q] empty class functions should not be in r[], they should be a reference somewhere to Lava.empty()/noop()
	- [Feature,Q] all parent function names should be resolved automatically.
		// It will allow to insert a class in middle of the hierarchy.
		// Also assert there are no limitations for compression. <br/>
		// also rename &lt;%fname%&gt; macros in strings inside the function to current function's name (needed in exceptions).
	- [Feature,Dev] wrapper for ClassManager to be used separately from the framework
	- [Performance] Should it reserve nulls in object prototypes for those members, which are created in constructor?
		// Does it affect performance? Needs a test.
	- [Feature] _staticInit - applied after the class is loaded or constructed, receives ClassData.
		// need to move container.Element IOS fixes into static constructor.
Serializer.js
	- [Feature,Q] currently, serializing a string preserves the "\r\n" sequence.
		Convert it to "\n" by default and make a schema switch to return the old behaviour.
transitions.js
	- [Fix] more transitions (*)
Cron.js
	- [Performance] use requestAnimationFrame
Lava.js
	- [Refactoring] namespaces reservation: move to a separate file (this will allow to generate it in user projects)
	- [Feature] create a script, which generates the file with namespaces in Lava.
	- [Feature] bootstrap() should process the control (x:) attributes, for example x:resource_id
Algorithms/Sorting/
	- [Feature,Performance] Need fast unstable sort algorithm (*)

#Create widgets
	- [Feature] Slider
		// with hidden input field
	- [Feature] Menu
		// with keyboard navigation
	- [Feature] Validator - a separate widget with visitor pattern for validation rules
		// wraps the input

#Existing widgets
Panels
	- [Feature] when panels are collapsed, but the body stays in DOM - they should sleep() their content
TreeView
	- [Feature] must not contain Morph containers inside it
Select
	- [Feature] there must be a sugar which parses it's content (optgroup and option tags)
		// it will be custom function, which is independent from Sugar class.
		// Schema will define where to put the result. <br/>
		// Requires Sugar modification.
DropDown
	- [Feature] does not support the "disabled" class (is it needed?); "open" class should be assignable via option.
Calendar
	- [Feature] should be constant size, support range selection and support full localization for "now" and month name
		// in some languages month and year numbers are not arabic
Inputs
	- [Feature] working form_id attribute
	- [Feature] validation for email input
	- [Feature] input watermarks
		// in Lava they will be elements before the input, with negative margin. It's the most reliable way.

#New functionality
	- [Feature] FocusManager - a class which routes keyboard input to it's current "focused" target
		(target is a widget, which supports the 'focusable' interface)
	- [Feature] Lava.data.CollectionListener.class.js - batch add listeners to items in Enumerable collections

#Build
	- [Refactoring] a better build script
		// start by making methods like exportClasses and exportWidget in separate namespace
	- [Feature,Q] build script should remove unnecessary members that depend on switches
		// Example: Lava.exportTranslatableString should be removed, when Lava.schema.parsers.EXPORT_STRINGS is off
	- [Feature] the Lava Node module must not be exported to global
	- [Feature] build script should write version and commit hash to the result files

#Site
	- [Feature] this list should be turned into something more usable.
		// People should be able to leave comments, vote for features they need, and gather requirements.
		// This may be done in external service.
	- [Refactoring] the Widgets page must be assembled like Examples
	- [Refactoring] there must be no calls to TemplateParser (via Lava.bootstrap) in the www directory. <br/>
		Everything must be assembled on server.
	- [Feature] Widgets page: each widget must have a detailed description with usage, events, roles, properties and options
	- [Feature] a demo of a native widget wrapper (for example, CodeMirror, color pickers or Select2)
	- [Feature] there must be an ability to launch unit tests right on the framework site
	- [Feature] code coverage for unit tests, that can be viewed online
	- [Refactoring] code in examples on main page is a bit messy, build process is complicated. Correct it.

#Documentation
	- [Feature] Generate automatic API docs. Must be JSDoc theme.
	- [Feature] Doc system should validate class comments metadata
		// @extends and @lends must match the Extends and class name
	- [Feature] Widget documentation must be generated automatically
		// including properties, events, options and sugar

#Maintenance
	- [Feature] Automatic on-commit codestyle validation
		// one "var" per function, no camelCase, etc...
